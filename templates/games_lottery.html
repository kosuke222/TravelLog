{% extends "base.html" %}

{% block content %}
  <section class="page-header">
    <div>
      <p class="eyebrow">Lottery</p>
      <h1>くじ引き</h1>
      <p class="lead">入力した候補からランダムで表示します。</p>
    </div>
  </section>

  <section class="panel form-panel">
    <form method="post" class="form-grid">
      <div>
        <label for="text">候補</label>
        <input id="text" name="text" type="text" placeholder="例: ゲームA" required />
      </div>
      <button class="button primary" type="submit">追加する</button>
    </form>
    <div class="lottery-actions">
      <a class="button ghost" href="{{ url_for('games_lottery', draw=1) }}">くじを引く</a>
      {% if result %}
        <div class="lottery-result">
          <span>結果</span>
          <strong>{{ result }}</strong>
        </div>
      {% endif %}
    </div>
  </section>

  <section class="panel">
    <ul class="item-list">
      {% for item in items %}
        <li class="item-row">
          <div>
            <strong>{{ item["text"] }}</strong>
            <span class="meta">{{ item["created_at"] }}</span>
          </div>
          <form method="post" action="{{ url_for('games_lottery_delete', item_id=item['id']) }}">
            <button class="button danger" type="submit">削除</button>
          </form>
        </li>
      {% else %}
        <li class="item-row empty-state">まだ候補がありません。</li>
      {% endfor %}
    </ul>
  </section>
{% endblock %}
