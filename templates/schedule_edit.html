{% extends "base.html" %}

{% block content %}
  <section class="page-header">
    <div>
      <p class="eyebrow">Edit</p>
      <h1>予定を編集</h1>
      <p class="lead">予定とプラン内容を更新できます。</p>
    </div>
  </section>

  <section class="panel form-panel">
    <form method="post" action="{{ url_for('schedule_update', schedule_id=schedule['id']) }}" class="form-grid" enctype="multipart/form-data">
      <div>
        <label for="title">予定</label>
        <input id="title" name="title" type="text" value="{{ schedule['title'] }}" />
      </div>
      <div>
        <label for="date">日付</label>
        <input id="date" name="date" type="date" value="{{ schedule['date'] or '' }}" />
      </div>
      <div>
        <label for="detail">デートプラン詳細</label>
        <textarea id="detail" name="detail">{{ schedule['detail'] or '' }}</textarea>
      </div>
      <div>
        <label for="address">住所</label>
        <input id="address" name="address" type="text" value="{{ schedule['address'] or '' }}" />
      </div>
      <div>
        <label for="photos">写真（追加アップロード）</label>
        <input id="photos" name="photos" type="file" accept="image/*" multiple />
        {% if schedule["photo_url"] or photos %}
          <div class="photo-shell">
            <div class="photo-scroller">
              {% if schedule["photo_url"] %}
                <img class="place-photo preview" src="{{ schedule['photo_url'] }}" alt="{{ schedule['title'] }}" />
              {% endif %}
              {% for photo in photos %}
                <img class="place-photo preview" src="{{ photo['photo_url'] }}" alt="{{ schedule['title'] }}" />
              {% endfor %}
            </div>
          </div>
        {% endif %}
      </div>

      <input type="hidden" id="place_id" name="place_id" value="{{ schedule['place_id'] or '' }}" />
      <input type="hidden" id="lat" name="lat" value="{{ schedule['lat'] or '' }}" />
      <input type="hidden" id="lng" name="lng" value="{{ schedule['lng'] or '' }}" />
      <input type="hidden" id="photo_url" name="photo_url" value="{{ schedule['photo_url'] or '' }}" />
      <input type="hidden" id="photo_urls" name="photo_urls" />
      <input type="hidden" id="rating" name="rating" value="{{ schedule['rating'] or '' }}" />
      <input type="hidden" id="user_ratings_total" name="user_ratings_total" value="{{ schedule['user_ratings_total'] or '' }}" />
      <input type="hidden" id="website" name="website" value="{{ schedule['website'] or '' }}" />
      <input type="hidden" id="phone" name="phone" value="{{ schedule['phone'] or '' }}" />
      <input type="hidden" id="google_url" name="google_url" value="{{ schedule['google_url'] or '' }}" />
      <input type="hidden" id="opening_hours" name="opening_hours" value="{{ schedule['opening_hours'] or '' }}" />

      <div class="inline-actions">
        <button class="button primary" type="submit">更新する</button>
        <a class="button ghost" href="{{ url_for('schedule') }}">戻る</a>
      </div>
    </form>
  </section>
{% endblock %}
